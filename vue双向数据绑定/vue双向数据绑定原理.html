<!--
 * @Author: your name
 * @Date: 2022-06-27 19:13:33
 * @LastEditTime: 2022-06-27 19:44:00
 * @LastEditors: Please set LastEditors
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \Daily-interview-Question\interview\vue.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vue双向数据绑定原理</title>
</head>

<body>
  <p></p>
  <script>
    /* let val = 'tom';
    let person = {}; */

    function observable(obj) {
      if (!obj || typeof obj !== 'object') {
        return
      }
      let keys = Object.keys(obj);
      keys.forEach((key) => {
        difineReactive(obj, key, obj[key]);
      })
      return obj
    }

    /** 
     * 将对象的属性用Object.defineProperty() 进行设置
     */

    function defineReactive(obj, key, val) {
      Object.defineProperty(person, 'name', {
        get() {
          console.log('name属性被读取了。。。')
          return val
        },
        set(newVal) {
          console.log('name属性被修改了')
          val = newVal;
        }
      })
    }
    let person = observable({
      name: 'tom',
      age: 15
    });
  </script>
</body>

</html>